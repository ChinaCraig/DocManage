<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¶ˆæ¯ç»„ä»¶æ ·å¼æµ‹è¯•</title>
    <link href="/static/css/message_components.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 2rem;
            min-height: 100vh;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .test-title {
            text-align: center;
            color: #2c3e50;
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 2rem;
            background: linear-gradient(135deg, #3498db, #9b59b6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .type-section {
            margin-bottom: 3rem;
            padding: 1.5rem;
            background: rgba(52, 152, 219, 0.05);
            border-radius: 12px;
            border-left: 4px solid #3498db;
        }
        
        .type-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 class="test-title">ğŸ¨ æ¶ˆæ¯ç»„ä»¶æ ·å¼æµ‹è¯•</h1>
        
        <div class="type-section">
            <h2 class="type-title">ğŸ“ 1. æ–‡æœ¬å†…å®¹ (Text)</h2>
            <div class="content-text intent-analysis">
                ğŸ¯ æ„å›¾è¯†åˆ«åˆ†æï¼šç³»ç»Ÿå·²æˆåŠŸè¯†åˆ«æ‚¨çš„æ„å›¾ä¸ºçŸ¥è¯†åº“æ£€ç´¢æ“ä½œã€‚é€šè¿‡è‡ªç„¶è¯­è¨€å¤„ç†å’Œè¯­ä¹‰ç†è§£ï¼Œåˆ†æå‡ºç”¨æˆ·å…·æœ‰æ˜ç¡®çš„ä¿¡æ¯æŸ¥æ‰¾éœ€æ±‚ã€‚å»ºè®®å¯ç”¨æ™ºèƒ½æœç´¢åŠŸèƒ½å¹¶æä¾›ç›¸å…³åº¦æ’åºã€‚ç½®ä¿¡åº¦ï¼š88%ã€‚è¿™æ˜¯ä¸€æ®µæµ‹è¯•é—´è·æ•ˆæœçš„è¾ƒé•¿æ–‡æœ¬å†…å®¹ã€‚
            </div>
            <div class="content-text regular-text">
                è¿™æ˜¯ä¸€ä¸ªæ™®é€šæ–‡æœ¬å†…å®¹ç¤ºä¾‹ã€‚ç³»ç»Ÿæ­£åœ¨ä¸ºæ‚¨å¤„ç†ç›¸å…³è¯·æ±‚ï¼Œè¯·ç¨å€™ç‰‡åˆ»ã€‚
            </div>
        </div>
        
        <div class="type-section">
            <h2 class="type-title">ğŸ“„ 2. Markdownå†…å®¹</h2>
            <div class="content-markdown">
                <h1>ä¸»æ ‡é¢˜ç¤ºä¾‹</h1>
                <h2>äºŒçº§æ ‡é¢˜</h2>
                <h3>ä¸‰çº§æ ‡é¢˜</h3>
                <p>è¿™æ˜¯ä¸€ä¸ª<strong>åŠ ç²—æ–‡æœ¬</strong>å’Œ<em>æ–œä½“æ–‡æœ¬</em>çš„ç¤ºä¾‹ã€‚</p>
                <p>è¿™é‡Œæœ‰ä¸€ä¸ª<code>ä»£ç ç‰‡æ®µ</code>çš„ç¤ºä¾‹ã€‚</p>
                <ul>
                    <li>åˆ—è¡¨é¡¹ç›®ä¸€ï¼šåŠŸèƒ½å®Œå–„</li>
                    <li>åˆ—è¡¨é¡¹ç›®äºŒï¼šæ€§èƒ½ä¼˜åŒ–</li>
                    <li>åˆ—è¡¨é¡¹ç›®ä¸‰ï¼šç”¨æˆ·ä½“éªŒ</li>
                </ul>
            </div>
        </div>
        
        <div class="type-section">
            <h2 class="type-title">ğŸ“Š 3. è¡¨æ ¼å†…å®¹</h2>
            <div class="content-table-container">
                <table class="content-table">
                    <thead>
                        <tr>
                            <th>æ–‡æ¡£åç§°</th>
                            <th>ç›¸å…³åº¦</th>
                            <th>æ–‡ä»¶ç±»å‹</th>
                            <th>æœ€åä¿®æ”¹</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>é¡¹ç›®éœ€æ±‚æ–‡æ¡£.pdf</td>
                            <td>0.95</td>
                            <td>PDF</td>
                            <td>2025-06-18</td>
                        </tr>
                        <tr>
                            <td>æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡.docx</td>
                            <td>0.87</td>
                            <td>Word</td>
                            <td>2025-06-17</td>
                        </tr>
                        <tr>
                            <td>æ•°æ®åˆ†ææŠ¥å‘Š.xlsx</td>
                            <td>0.76</td>
                            <td>Excel</td>
                            <td>2025-06-16</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <div class="type-section">
            <h2 class="type-title">ğŸ–¼ï¸ 4. å›¾ç‰‡å†…å®¹</h2>
            <div class="content-image-container">
                <img src="https://via.placeholder.com/400x200/3498db/ffffff?text=ç¤ºä¾‹å›¾ç‰‡" 
                     alt="ç¤ºä¾‹å›¾ç‰‡" class="content-image">
            </div>
        </div>
        
        <div class="type-section">
            <h2 class="type-title">ğŸ’» 5. ä»£ç å—</h2>
            <div class="content-code-container">
                <div class="code-language">Python</div>
                <pre><code>def search_documents(query, top_k=5):
    """æ™ºèƒ½æ–‡æ¡£æœç´¢å‡½æ•°"""
    # è¿›è¡Œå‘é‡åŒ–æœç´¢
    results = vector_service.search(query, top_k)
    
    # ä½¿ç”¨LLMè¿›è¡Œç»“æœä¼˜åŒ–
    optimized_results = llm_service.optimize_results(results)
    
    return {
        'success': True,
        'data': optimized_results,
        'total': len(optimized_results)
    }</code></pre>
                <button class="code-copy-btn">å¤åˆ¶</button>
            </div>
        </div>
        
        <div class="type-section">
            <h2 class="type-title">âš™ï¸ 6. å·¥å…·è°ƒç”¨</h2>
            <div class="content-tool-call">
                <div class="tool-call-header">
                    <span class="tool-call-icon">ğŸ”§</span>
                    åˆ›å»ºæ–‡ä»¶å¤¹å·¥å…·
                </div>
                <div class="tool-call-details">
                    <div class="tool-call-params">å‚æ•°:
{
  "folder_name": "test_folder",
  "parent_path": "/documents/projects",
  "description": "é¡¹ç›®æµ‹è¯•æ–‡ä»¶å¤¹"
}</div>
                    <div class="tool-call-result">
                        æˆåŠŸåˆ›å»ºæ–‡ä»¶å¤¹ 'test_folder'ï¼Œè·¯å¾„ï¼š/documents/projects/test_folder
                    </div>
                </div>
            </div>
        </div>
        
        <div class="type-section">
            <h2 class="type-title">ğŸ“ 7. æ–‡ä»¶é“¾æ¥</h2>
            <div class="content-file-link">
                <a href="#" class="file-link-item">
                    <div class="file-link-icon">ğŸ“„</div>
                    <div class="file-link-content">
                        <div class="file-link-name">é¡¹ç›®æŠ€æœ¯æ–‡æ¡£.pdf</div>
                        <div class="file-link-description">åŒ…å«å®Œæ•´çš„æŠ€æœ¯æ¶æ„è®¾è®¡å’Œå®ç°æ–¹æ¡ˆ</div>
                    </div>
                </a>
            </div>
            <div class="content-file-link">
                <a href="#" class="file-link-item">
                    <div class="file-link-icon">ğŸ“Š</div>
                    <div class="file-link-content">
                        <div class="file-link-name">æ•°æ®åˆ†ææŠ¥å‘Š.xlsx</div>
                        <div class="file-link-description">æœ€æ–°çš„ç”¨æˆ·è¡Œä¸ºæ•°æ®åˆ†æå’Œè¶‹åŠ¿é¢„æµ‹</div>
                    </div>
                </a>
            </div>
        </div>
        
        <div class="type-section">
            <h2 class="type-title">ğŸ”— 8. æ™®é€šé“¾æ¥</h2>
            <div class="content-link">
                <a href="#" class="link-item">
                    <span class="link-icon">ğŸŒ</span>
                    æŸ¥çœ‹åœ¨çº¿æ–‡æ¡£
                </a>
                <a href="#" class="link-item">
                    <span class="link-icon">ğŸ“š</span>
                    è®¿é—®çŸ¥è¯†åº“
                </a>
                <a href="#" class="link-item">
                    <span class="link-icon">âš¡</span>
                    å¿«é€Ÿå¼€å§‹
                </a>
            </div>
        </div>
        
        <!-- ç§»é™¤æ„å›¾è¯†åˆ«ä¿¡æ¯å±•ç¤ºåŒºåŸŸ -->
        
        <div class="type-section">
            <h2 class="type-title">ğŸ’¬ å®Œæ•´æ¶ˆæ¯ç¤ºä¾‹</h2>
            <div class="message-container" data-role="assistant">
                <div class="message-header">
                    <span class="message-role">AIåŠ©æ‰‹</span>
                    <div class="intent-info">
                        <span class="intent-badge knowledge_search">çŸ¥è¯†æ£€ç´¢</span>
                        <span class="confidence-score">ç½®ä¿¡åº¦: 95%</span>
                    </div>
                    <span class="message-time">2025-06-18 09:30:25</span>
                </div>
                <div class="message-content">
                    <div class="content-text intent-analysis">
                        ğŸ¯ æ„å›¾è¯†åˆ«åˆ†æï¼šç”¨æˆ·è¦æ±‚è¿›è¡Œæ–‡æ¡£æœç´¢ï¼Œå·²è¯†åˆ«ä¸ºçŸ¥è¯†åº“æ£€ç´¢æ“ä½œã€‚ç³»ç»Ÿé€šè¿‡è¯­ä¹‰åˆ†æè¯†åˆ«å‡ºè¿™æ˜¯ä¸€ä¸ªæ˜ç¡®çš„çŸ¥è¯†æ£€ç´¢è¯·æ±‚ï¼Œæ¶‰åŠæŠ€æœ¯æ–‡æ¡£çš„æœç´¢éœ€æ±‚ã€‚åˆ†æç»“æœæ˜¾ç¤ºç”¨æˆ·å…·æœ‰æ˜ç¡®çš„ä¿¡æ¯è·å–ç›®æ ‡ï¼Œå»ºè®®æä¾›ç›¸å…³æ–‡æ¡£é“¾æ¥å’Œé¢„è§ˆåŠŸèƒ½ã€‚ç½®ä¿¡åº¦ï¼š95%ã€‚è¿™æ˜¯ä¸€æ®µè¾ƒé•¿çš„æ„å›¾åˆ†ææ–‡æœ¬ï¼Œç”¨äºæµ‹è¯•ä¸ä¸‹æ–¹AIå›ç­”åŒºåŸŸä¹‹é—´çš„é—´è·æ•ˆæœæ˜¯å¦åˆé€‚ã€‚
                    </div>
                    <div class="content-markdown">
                        <h2>æœç´¢ç»“æœ</h2>
                        <p>æ ¹æ®æ‚¨çš„æŸ¥è¯¢ <strong>"é¡¹ç›®æŠ€æœ¯æ–‡æ¡£"</strong>ï¼Œæˆ‘æ‰¾åˆ°äº†ä»¥ä¸‹ç›¸å…³æ–‡æ¡£ï¼š</p>
                        <ul>
                            <li>æ‰¾åˆ°äº†1ä¸ªé«˜åº¦ç›¸å…³çš„æ–‡æ¡£</li>
                            <li>ç›¸å…³åº¦è¯„åˆ†è¾¾åˆ°0.95</li>
                            <li>åŒ…å«å®Œæ•´çš„æŠ€æœ¯æ¶æ„ä¿¡æ¯</li>
                        </ul>
                    </div>
                    <div class="content-table-container">
                        <table class="content-table">
                            <thead>
                                <tr>
                                    <th>æ–‡æ¡£</th>
                                    <th>ç›¸å…³åº¦</th>
                                    <th>ç±»å‹</th>
                                    <th>æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>æŠ€æœ¯æ¶æ„è®¾è®¡.pdf</td>
                                    <td>0.95</td>
                                    <td>PDF</td>
                                    <td>ğŸ“„ é¢„è§ˆ</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="content-file-link">
                        <a href="#" class="file-link-item">
                            <div class="file-link-icon">ğŸ“„</div>
                            <div class="file-link-content">
                                <div class="file-link-name">æŠ€æœ¯æ¶æ„è®¾è®¡.pdf</div>
                                <div class="file-link-description">æŸ¥çœ‹å®Œæ•´çš„æŠ€æœ¯æ¶æ„è®¾è®¡æ–‡æ¡£</div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // ä¸ºä»£ç å¤åˆ¶æŒ‰é’®æ·»åŠ åŠŸèƒ½
        document.querySelectorAll('.code-copy-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const codeBlock = this.parentElement.querySelector('code');
                if (codeBlock) {
                    navigator.clipboard.writeText(codeBlock.textContent).then(() => {
                        this.textContent = 'å·²å¤åˆ¶';
                        setTimeout(() => this.textContent = 'å¤åˆ¶', 2000);
                    });
                }
            });
        });

        // æµ‹è¯•æ“ä½œåˆ—è¿‡æ»¤åŠŸèƒ½
        function testTableFiltering() {
            // å¸¦æœ‰æ“ä½œåˆ—çš„æµ‹è¯•æ•°æ®
            const testTableData = {
                headers: ['æ–‡æ¡£åç§°', 'ç›¸å…³åº¦', 'æ–‡ä»¶ç±»å‹', 'æœ€åä¿®æ”¹', 'æ“ä½œ'],
                rows: [
                    ['æµ‹è¯•æ–‡æ¡£1.pdf', '0.95', 'PDF', '2025-06-18', 'ğŸ“„ é¢„è§ˆ'],
                    ['æµ‹è¯•æ–‡æ¡£2.docx', '0.87', 'Word', '2025-06-17', 'ğŸ“„ é¢„è§ˆ'],
                    ['æµ‹è¯•æ–‡æ¡£3.xlsx', '0.76', 'Excel', '2025-06-16', 'ğŸ“„ é¢„è§ˆ']
                ]
            };
            
            // åˆ›å»ºæµ‹è¯•è¡¨æ ¼
            const testTable = MessageRenderer.renderTable(testTableData);
            
            // æ·»åŠ åˆ°é¡µé¢åº•éƒ¨è¿›è¡Œæµ‹è¯•
            const testContainer = document.createElement('div');
            testContainer.style.marginTop = '2rem';
            testContainer.style.padding = '1rem';
            testContainer.style.border = '2px dashed #ccc';
            testContainer.innerHTML = '<h3>æ“ä½œåˆ—è¿‡æ»¤æµ‹è¯•ï¼š</h3>';
            testContainer.appendChild(testTable);
            
            document.body.appendChild(testContainer);
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåè¿è¡Œæµ‹è¯•
        document.addEventListener('DOMContentLoaded', testTableFiltering);
    </script>
</body>
</html> 